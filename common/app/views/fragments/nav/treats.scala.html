@(containerDefinition: layout.FaciaContainer, frontProperties: model.FrontProperties)(implicit request: RequestHeader)

@import implicits.FaciaContentImplicits._
@import views.support.{Treat, SnappableTreat, ClimateTreat, NormalTreat}
@import model.SupportedUrl
@import implicits.Requests.RichRequestHeader

@if(containerDefinition.collectionEssentials.treats.nonEmpty) {
    <ul class="treats__container">
    @containerDefinition.collectionEssentials.treats.zipWithIndex.map { case (treat, index) =>
        @defining(SupportedUrl.fromFaciaContent(treat)) { link =>
            <li class="treats__list-item">
                @Treat.fromUrl(link) match {
                    case SnappableTreat => {
                        <a href="@link" data-link-name="treat | @{index + 1} | @treat.headline" class="treats__treat facia-snap js-snap js-snappable" data-snap-type="json.html" data-snap-uri="http://interactive.guim.co.uk/thrashers/election-treat/source.json">@treat.headline</a>
                    }

                    case ClimateTreat => {
                        <div class="climate-snap facia-snap js-snap js-snappable" data-snap-type="json.html" data-snap-uri="http://interactive.guim.co.uk/thrashers/climate-treat/source.json"></div>
                    }

                    case GlastoTreat => {
                        <a href="@link" data-link-name="treat | @{index + 1} | @treat.headline" class="treats__treat facia-snap js-snap js-snappable" data-snap-type="json.html" data-snap-uri="http://interactive.guim.co.uk/thrashers/glasto-treat/source.json">@treat.headline</a>
                    }

                    case NormalTreat => {
                        <a href="@link" data-link-name="treat | @{index + 1} | @treat.headline" class="treats__treat">@treat.headline</a>
                    }

                    case _ => {}
                }
            </li>
        }
    }
    </ul>
}
